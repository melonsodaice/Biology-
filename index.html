<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bio Ritual ðŸŒ³</title>
    <style>
        :root { --apple: #88D66C; --lemon: #F4E06D; --bg: #FCFCFA; }
        body { font-family: sans-serif; background: var(--bg); padding: 15px; color: #333; }
        .header { text-align: center; margin-bottom: 20px; }
        .backup-section { background: #eee; padding: 10px; border-radius: 8px; margin-bottom: 20px; font-size: 13px; }
        .container { overflow-x: auto; background: white; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        table { width: 100%; border-collapse: collapse; min-width: 900px; }
        th { padding: 10px; font-size: 12px; }
        .col-study { background: var(--lemon); }
        .col-rev { background: var(--apple); }
        td { padding: 8px; border-bottom: 1px solid #eee; text-align: center; }
        .ch-input { width: 90%; border: none; border-bottom: 1px solid #ccc; font-size: 14px; }
        .date-input { display: block; width: 85px; margin: 4px auto; font-size: 11px; }
        textarea { width: 90%; height: 40px; font-size: 12px; border: 1px solid #eee; }
        button { padding: 8px 12px; cursor: pointer; border-radius: 5px; border: 1px solid #ccc; background: white; }
    </style>
</head>
<body>

    <div class="header">
        <h1>Biology Ritual ðŸŒ³</h1>
    </div>

    <div class="backup-section">
        <strong>Manual Sync:</strong> 
        <button onclick="exportData()">Copy Backup Code</button>
        <button onclick="importData()">Import Code</button>
        <p style="margin-top:5px; color:#666;">* Click Copy, then paste the code to your other device.</p>
    </div>

    <div class="container">
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th style="width:150px">Title</th>
                    <th class="col-study">Study</th>
                    <th class="col-rev">R1</th>
                    <th class="col-rev">R2</th>
                    <th style="background:#FFFBEB">Sum I</th>
                    <th class="col-rev">R3</th>
                    <th style="background:#F0F9ED">Sum II</th>
                    <th class="col-rev">R4</th>
                </tr>
            </thead>
            <tbody id="ritual-body"></tbody>
        </table>
    </div>

    <script>
        const body = document.getElementById('ritual-body');
        for (let i = 1; i <= 38; i++) {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${i}</td>
                <td><input type="text" class="ch-input" id="t-${i}"></td>
                <td><input type="checkbox" id="cs-${i}"><input type="date" class="date-input" id="ds-${i}"></td>
                <td><input type="checkbox" id="cr1-${i}"><input type="date" class="date-input" id="dr1-${i}"></td>
                <td><input type="checkbox" id="cr2-${i}"><input type="date" class="date-input" id="dr2-${i}"></td>
                <td><textarea id="s1-${i}"></textarea></td>
                <td><input type="checkbox" id="cr3-${i}"><input type="date" class="date-input" id="dr3-${i}"></td>
                <td><textarea id="s2-${i}"></textarea></td>
                <td><input type="checkbox" id="cr4-${i}"><input type="date" class="date-input" id="dr4-${i}"></td>
            `;
            body.appendChild(row);
        }

        // è‡ªå‹•å­˜æª”åˆ°ç•¶å‰è¨­å‚™
        document.querySelectorAll('input, textarea').forEach(el => {
            el.addEventListener('input', () => {
                const val = el.type === 'checkbox' ? el.checked : el.value;
                localStorage.setItem('bio-v2-' + el.id, val);
            });
        });

        // è¼‰å…¥ç•¶å‰è¨­å‚™å­˜æª”
        window.addEventListener('load', () => {
            document.querySelectorAll('input, textarea').forEach(el => {
                const saved = localStorage.getItem('bio-v2-' + el.id);
                if (saved !== null) {
                    if (el.type === 'checkbox') el.checked = (saved === 'true');
                    else el.value = saved;
                }
            });
        });

        // åŒ¯å‡ºåŠŸèƒ½
        function exportData() {
            let data = {};
            for(let i=0; i<localStorage.length; i++){
                let key = localStorage.key(i);
                if(key.startsWith('bio-v2-')) data[key] = localStorage.getItem(key);
            }
            const code = btoa(JSON.stringify(data));
            navigator.clipboard.writeText(code);
            alert("Backup code copied to clipboard!");
        }

        // åŒ¯å…¥åŠŸèƒ½
        function importData() {
            const code = prompt("Paste your backup code here:");
            if (code) {
                try {
                    const data = JSON.parse(atob(code));
                    Object.keys(data).forEach(key => localStorage.setItem(key, data[key]));
                    location.reload();
                } catch(e) { alert("Invalid code!"); }
            }
        }
    </script>
</body>
</html>
